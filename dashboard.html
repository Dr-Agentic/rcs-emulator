<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>RCS Emulator SaaS - Dashboard</title>
    <link rel="icon" type="image/jpeg" href="favicon.jpg">
    <link rel="shortcut icon" type="image/jpeg" href="favicon.jpg">
    <link rel="apple-touch-icon" href="favicon.jpg">
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="auth.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=SF+Pro+Display:wght@300;400;500;600;700&display=swap" rel="stylesheet">
</head>
<body>
    <!-- Dashboard Header - Dropbox Style -->
    <header class="dropbox-header">
        <div class="header-container">
            <!-- Logo Section -->
            <div class="header-logo">
                <div class="logo-icon">üì±</div>
                <span class="logo-text">RCS Emulator</span>
            </div>
            
            <!-- Main Navigation -->
            <nav class="main-nav">
                <div class="nav-items">
                    <a href="#emulator" class="nav-link active" data-section="emulator">
                        <svg class="nav-icon" width="20" height="20" viewBox="0 0 24 24" fill="none">
                            <path d="M12 2C13.1 2 14 2.9 14 4V6H16C17.1 6 18 6.9 18 8V20C18 21.1 17.1 22 16 22H8C6.9 22 6 21.1 6 20V8C6 6.9 6.9 6 8 6H10V4C10 2.9 10.9 2 12 2ZM12 4V6H12V4ZM8 8V20H16V8H8Z" fill="currentColor"/>
                        </svg>
                        <span>Emulator</span>
                    </a>
                    <a href="#api-docs" class="nav-link" data-section="api-docs">
                        <svg class="nav-icon" width="20" height="20" viewBox="0 0 24 24" fill="none">
                            <path d="M14,2H6A2,2 0 0,0 4,4V20A2,2 0 0,0 6,22H18A2,2 0 0,0 20,20V8L14,2M18,20H6V4H13V9H18V20Z" fill="currentColor"/>
                        </svg>
                        <span>API Docs</span>
                    </a>
                    <a href="#settings" class="nav-link" data-section="settings">
                        <svg class="nav-icon" width="20" height="20" viewBox="0 0 24 24" fill="none">
                            <path d="M12,15.5A3.5,3.5 0 0,1 8.5,12A3.5,3.5 0 0,1 12,8.5A3.5,3.5 0 0,1 15.5,12A3.5,3.5 0 0,1 12,15.5M19.43,12.97C19.47,12.65 19.5,12.33 19.5,12C19.5,11.67 19.47,11.34 19.43,11L21.54,9.37C21.73,9.22 21.78,8.95 21.66,8.73L19.66,5.27C19.54,5.05 19.27,4.96 19.05,5.05L16.56,6.05C16.04,5.66 15.5,5.32 14.87,5.07L14.5,2.42C14.46,2.18 14.25,2 14,2H10C9.75,2 9.54,2.18 9.5,2.42L9.13,5.07C8.5,5.32 7.96,5.66 7.44,6.05L4.95,5.05C4.73,4.96 4.46,5.05 4.34,5.27L2.34,8.73C2.22,8.95 2.27,9.22 2.46,9.37L4.57,11C4.53,11.34 4.5,11.67 4.5,12C4.5,12.33 4.53,12.65 4.57,12.97L2.46,14.63C2.27,14.78 2.22,15.05 2.34,15.27L4.34,18.73C4.46,18.95 4.73,19.03 4.95,18.95L7.44,17.94C7.96,18.34 8.5,18.68 9.13,18.93L9.5,21.58C9.54,21.82 9.75,22 10,22H14C14.25,22 14.46,21.82 14.5,21.58L14.87,18.93C15.5,18.68 16.04,18.34 16.56,17.94L19.05,18.95C19.27,19.03 19.54,18.95 19.66,18.73L21.66,15.27C21.78,15.05 21.73,14.78 21.54,14.63L19.43,12.97Z" fill="currentColor"/>
                        </svg>
                        <span>Settings</span>
                    </a>
                </div>
            </nav>
            
            <!-- User Menu -->
            <div class="user-section">
                <div class="user-dropdown">
                    <button class="user-trigger" id="userMenuTrigger">
                        <div class="user-avatar">
                            <span id="userInitial">U</span>
                        </div>
                        <span class="user-name" id="userName">user</span>
                        <svg class="dropdown-arrow" width="16" height="16" viewBox="0 0 24 24" fill="none">
                            <path d="M7 10L12 15L17 10H7Z" fill="currentColor"/>
                        </svg>
                    </button>
                    
                    <div class="user-dropdown-menu" id="userDropdownMenu">
                        <div class="dropdown-header">
                            <div class="user-info-detailed">
                                <div class="user-avatar-large">
                                    <span id="userInitialLarge">U</span>
                                </div>
                                <div class="user-details">
                                    <div class="user-name-large" id="userNameLarge">user</div>
                                    <div class="user-email">demo@rcsemulator.com</div>
                                </div>
                            </div>
                        </div>
                        
                        <div class="dropdown-divider"></div>
                        
                        <div class="dropdown-items">
                            <a href="#settings" class="dropdown-item" data-section="settings">
                                <svg width="16" height="16" viewBox="0 0 24 24" fill="none">
                                    <path d="M12,15.5A3.5,3.5 0 0,1 8.5,12A3.5,3.5 0 0,1 12,8.5A3.5,3.5 0 0,1 15.5,12A3.5,3.5 0 0,1 12,15.5M19.43,12.97C19.47,12.65 19.5,12.33 19.5,12C19.5,11.67 19.47,11.34 19.43,11L21.54,9.37C21.73,9.22 21.78,8.95 21.66,8.73L19.66,5.27C19.54,5.05 19.27,4.96 19.05,5.05L16.56,6.05C16.04,5.66 15.5,5.32 14.87,5.07L14.5,2.42C14.46,2.18 14.25,2 14,2H10C9.75,2 9.54,2.18 9.5,2.42L9.13,5.07C8.5,5.32 7.96,5.66 7.44,6.05L4.95,5.05C4.73,4.96 4.46,5.05 4.34,5.27L2.34,8.73C2.22,8.95 2.27,9.22 2.46,9.37L4.57,11C4.53,11.34 4.5,11.67 4.5,12C4.5,12.33 4.53,12.65 4.57,12.97L2.46,14.63C2.27,14.78 2.22,15.05 2.34,15.27L4.34,18.73C4.46,18.95 4.73,19.03 4.95,18.95L7.44,17.94C7.96,18.34 8.5,18.68 9.13,18.93L9.5,21.58C9.54,21.82 9.75,22 10,22H14C14.25,22 14.46,21.82 14.5,21.58L14.87,18.93C15.5,18.68 16.04,18.34 16.56,17.94L19.05,18.95C19.27,19.03 19.54,18.95 19.66,18.73L21.66,15.27C21.78,15.05 21.73,14.78 21.54,14.63L19.43,12.97Z" fill="currentColor"/>
                                </svg>
                                <span>Account settings</span>
                            </a>
                            
                            <a href="#api-docs" class="dropdown-item" data-section="api-docs">
                                <svg width="16" height="16" viewBox="0 0 24 24" fill="none">
                                    <path d="M9,3V4H4V6H5V19A2,2 0 0,0 7,21H17A2,2 0 0,0 19,19V6H20V4H15V3H9M7,6H17V19H7V6M9,8V17H11V8H9M13,8V17H15V8H13Z" fill="currentColor"/>
                                </svg>
                                <span>API Documentation</span>
                            </a>
                        </div>
                        
                        <div class="dropdown-divider"></div>
                        
                        <div class="dropdown-items">
                            <button class="dropdown-item logout-action" id="logoutAction">
                                <svg width="16" height="16" viewBox="0 0 24 24" fill="none">
                                    <path d="M16,17V14H9V10H16V7L21,12L16,17M14,2A2,2 0 0,1 16,4V6H14V4H5V20H14V18H16V20A2,2 0 0,1 14,22H5A2,2 0 0,1 3,20V4A2,2 0 0,1 5,2H14Z" fill="currentColor"/>
                                </svg>
                                <span>Sign out</span>
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </header>

    <!-- Main Content -->
    <main class="dashboard-main">
        <!-- Emulator Section -->
        <div id="emulator" class="content-section active">
            <!-- Left Panel -->
            <div class="panel-left">
                <div class="panel-header">
                    <h2>RCS Developer Panel</h2>
                    <p>Paste JSON RCS messages to test on the emulator</p>
                </div>
                
                <div class="api-key-section collapsible">
                    <div class="collapsible-header" onclick="toggleCollapsible(this)">
                        <label>Your API Key</label>
                        <span class="collapse-icon">‚ñ∂</span>
                    </div>
                    <div class="collapsible-content" style="display: none;">
                        <div class="api-key-display">
                            <code id="apiKeyDisplay">Loading...</code>
                            <button id="copyApiKey" class="copy-btn">Copy</button>
                        </div>
                        <p class="api-key-note">Use this API key to send messages programmatically</p>
                    </div>
                </div>
                
                <div class="json-input-section">
                    <label for="jsonInput">RCS Message JSON:</label>
                    <textarea 
                        id="jsonInput" 
                        placeholder='Paste your RCS JSON message here, e.g.:
{
  "type": "text",
  "text": "Hello from RCS!",
  "sender": "business"
}

or

{
  "type": "richCard",
  "title": "Product Showcase",
  "description": "Check out our latest product!",
  "image": "https://example.com/image.jpg",
  "actions": [
    {"label": "Buy Now", "action": "buy_now", "type": "primary"},
    {"label": "Learn More", "action": "learn_more", "type": "secondary"}
  ]
}'
                        rows="5"
                    ></textarea>
                    <div class="json-controls">
                        <button id="sendJsonBtn" class="send-btn-panel">Send to Phone</button>
                    </div>
                    <div id="jsonStatus" class="json-status"></div>
                </div>

                <!-- cURL Command Section -->
                <div class="curl-command-section collapsible">
                    <div class="collapsible-header" onclick="toggleCollapsible(this)">
                        <h3>cURL Command</h3>
                        <span class="collapse-icon">‚ñ∂</span>
                    </div>
                    <div class="collapsible-content" style="display: none;">
                        <div class="curl-buttons">
                            <button id="refreshCurlBtn" class="copy-btn" style="margin-right: 8px;">Refresh</button>
                            <button id="copyCurlBtn" class="copy-btn">Copy Command</button>
                        </div>
                        <p class="curl-description">Ready-to-use cURL command with your API key (uses your exact JSON input):</p>
                        <div class="curl-display">
                            <pre id="curlCommand" class="curl-code">curl -X POST [YOUR_DOMAIN]/api/rcs/send \
  -H "Authorization: Bearer YOUR_API_KEY" \
  -H "Content-Type: application/json" \
  -d '{
  "type": "text",
  "text": "Hello from RCS!",
  "sender": "business"
}'</pre>
                        </div>
                        <p class="curl-note" id="curlNote">üí° The command updates automatically when you modify the JSON above</p>
                    </div>
                </div>

                <div class="examples-section">
                    <h3>Example RCS Messages</h3>
                    <p class="section-description">Try different RCS message types supported by our emulator</p>
                    
                    <div class="example-grid">
                        <div class="example-category">
                            <h4>üìù Text Messages</h4>
                            <button class="example-btn" data-example="text">Simple Text</button>
                            <button class="example-btn" data-example="suggestedActions">Text + Quick Actions</button>
                        </div>
                        
                        <div class="example-category">
                            <h4>üíé Rich Cards</h4>
                            <button class="example-btn" data-example="richCard">iPhone 15 Pro Card</button>
                            <button class="example-btn" data-example="coffeeCard">Coffee Shop Card</button>
                        </div>
                        
                        <div class="example-category">
                            <h4>üé† Carousels</h4>
                            <button class="example-btn" data-example="carousel">Product Carousel</button>
                        </div>
                        
                        <div class="example-category">
                            <h4>üì± Media Messages</h4>
                            <button class="example-btn" data-example="media">Photo Message</button>
                            <button class="example-btn" data-example="video">Video Message</button>
                        </div>
                    </div>
                </div>



                <div class="documentation-section collapsible">
                    <div class="collapsible-header" onclick="toggleCollapsible(this)">
                        <h3>RCS Message Schema</h3>
                        <span class="collapse-icon">‚ñ∂</span>
                    </div>
                    <div class="collapsible-content" style="display: none;">
                        <div class="schema-info">
                            <p><strong>Text Message:</strong></p>
                            <code>{"type": "text", "text": "message", "sender": "business|user"}</code>
                            
                            <p><strong>Rich Card:</strong></p>
                            <code>{"type": "richCard", "title": "...", "description": "...", "image": "url", "actions": [...]}</code>
                            
                            <p><strong>Media Message:</strong></p>
                            <code>{"type": "media", "mediaType": "image|video|document", "url": "...", "text": "..."}</code>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Middle Panel -->
            <div class="panel-middle">
                <!-- Phone Emulator -->
                <div class="device-frame">
                <div class="screen">
                    <!-- Status Bar -->
                    <div class="status-bar">
                        <div class="status-left">
                            <span class="time">9:41</span>
                        </div>
                        <div class="status-right">
                            <div class="signal-bars">
                                <div class="bar"></div>
                                <div class="bar"></div>
                                <div class="bar"></div>
                                <div class="bar"></div>
                            </div>
                            <div class="wifi-icon">üì∂</div>
                            <div class="battery">
                                <div class="battery-level"></div>
                            </div>
                        </div>
                    </div>

                    <!-- Navigation Header -->
                    <div class="nav-header">
                        <button class="back-btn">‚Äπ</button>
                        <div class="contact-info">
                            <div class="contact-avatar">
                                <img src="https://lh6.googleusercontent.com/x5FNSiOC9ffXqaTaUoNdXE7YpB9ZYdyb5e_YaIXxrSQinJPbTjlc1H1zGtnY2pFLfqZFitJDWgygXwJWpGHJqySkMJWpBYo0tNM6zKvFb8DlgP9gEJ9CJPwjh-Z6qFSVMQ4K1eCHS_0=w16383" alt="Lexus">
                            </div>
                            <div class="contact-details">
                                <h3>Sales Team</h3>
                                <p class="rcs-indicator">RCS ‚Ä¢ Online</p>
                            </div>
                        </div>
                        <button class="info-btn">‚ìò</button>
                    </div>

                    <!-- Messages Container -->
                    <div class="messages-container" id="messagesContainer">
                    </div>

                    <!-- Typing Indicator -->
                    <div class="typing-indicator" id="typingIndicator" style="display: none;">
                        <div class="typing-dots">
                            <span></span>
                            <span></span>
                            <span></span>
                        </div>
                        <span class="typing-text">Sales Team is typing...</span>
                    </div>

                    <!-- Input Area -->
                    <div class="input-area">
                        <div class="input-container">
                            <button class="attachment-btn" id="attachmentBtn">+</button>
                            <div class="text-input-wrapper">
                                <textarea 
                                    id="messageInput" 
                                    placeholder="RCS Message" 
                                    rows="1"
                                    maxlength="8000"
                                ></textarea>
                                <div class="input-actions">
                                    <button class="emoji-btn">üòä</button>
                                </div>
                            </div>
                            <button class="send-btn" id="sendBtn">
                                <svg width="24" height="24" viewBox="0 0 24 24" fill="none">
                                    <path d="M2 21L23 12L2 3V10L17 12L2 14V21Z" fill="currentColor"/>
                                </svg>
                            </button>
                        </div>
                        
                        <!-- Attachment Options -->
                        <div class="attachment-options" id="attachmentOptions" style="display: none;">
                            <div class="attachment-grid">
                                <button class="attachment-option" data-type="camera">
                                    <div class="attachment-icon">üì∑</div>
                                    <span>Camera</span>
                                </button>
                                <button class="attachment-option" data-type="photo">
                                    <div class="attachment-icon">üñºÔ∏è</div>
                                    <span>Photo</span>
                                </button>
                                <button class="attachment-option" data-type="video">
                                    <div class="attachment-icon">üé•</div>
                                    <span>Video</span>
                                </button>
                                <button class="attachment-option" data-type="document">
                                    <div class="attachment-icon">üìÑ</div>
                                    <span>Document</span>
                                </button>
                                <button class="attachment-option" data-type="location">
                                    <div class="attachment-icon">üìç</div>
                                    <span>Location</span>
                                </button>
                                <button class="attachment-option" data-type="contact">
                                    <div class="attachment-icon">üë§</div>
                                    <span>Contact</span>
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            </div>

            <!-- Right Panel -->
            <div class="panel-right">
                <div class="panel-header">
                    <h2>RCS Server Configuration</h2>
                    <p>Configure your server endpoint to receive user interactions</p>
                </div>
                    
                    <div class="form-group">
                        <label for="rcsServerUrl">RCS Server Endpoint URL</label>
                        <input 
                            type="url" 
                            id="rcsServerUrl" 
                            placeholder="https://your-server.com/rcs/webhook" 
                            class="server-input"
                        >
                        <div class="input-help">
                            <span class="help-icon">üí°</span>
                            <span class="help-text">Your server will receive POST requests with user interaction data</span>
                        </div>
                    </div>

                    <div class="form-group">
                        <label for="authToken">Authentication Token (Optional)</label>
                        <input 
                            type="password" 
                            id="authToken" 
                            placeholder="Bearer token or API key" 
                            class="server-input"
                        >
                        <div class="input-help">
                            <span class="help-icon">üîí</span>
                            <span class="help-text">Will be sent as Authorization header</span>
                        </div>
                    </div>

                    <div class="server-controls">
                        <button id="testServerBtn" class="test-btn">Test Connection</button>
                        <button id="saveServerBtn" class="save-btn">Save Configuration</button>
                    </div>

                    <div id="serverStatus" class="server-status" style="display: none;"></div>

                    <div class="webhook-info">
                        <h4>Webhook Payload Examples</h4>
                        <div class="payload-examples">
                            <div class="payload-example">
                                <h5>Text Message</h5>
                                <pre class="payload-code">{
  "type": "message",
  "messageType": "text",
  "text": "Hello from user",
  "userId": "user_12345",
  "timestamp": "2024-08-24T03:30:00Z",
  "sessionId": "session_abc123"
}</pre>
                            </div>
                            <div class="payload-example">
                                <h5>Button Click</h5>
                                <pre class="payload-code">{
  "type": "action",
  "actionType": "button_click",
  "action": "buy_now",
  "label": "Buy Now",
  "userId": "user_12345",
  "timestamp": "2024-08-24T03:30:00Z",
  "sessionId": "session_abc123",
  "context": {
    "messageId": "msg_789",
    "cardTitle": "iPhone 15 Pro"
  }
}</pre>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- API Documentation Section -->
        <div id="api-docs" class="content-section">
            <div class="api-docs">
                <h2>RCS API Documentation</h2>
                <p>Send RCS messages programmatically using our REST API</p>

                <div class="api-endpoint">
                    <h3>Send RCS Message</h3>
                    <p>
                        <span class="api-method">POST</span>
                        <span class="api-url">/api/rcs/send</span>
                    </p>
                    <p><strong>Headers:</strong></p>
                    <div class="api-example">
                        <code>Authorization: Bearer YOUR_API_KEY
Content-Type: application/json</code>
                    </div>
                    
                    <p><strong>Request Body (Text Message):</strong></p>
                    <div class="api-example">
                        <code>{
  "type": "text",
  "text": "Hello from RCS API!",
  "sender": "business"
}</code>
                    </div>

                    <p><strong>Request Body (Rich Card):</strong></p>
                    <div class="api-example">
                        <code>{
  "type": "richCard",
  "title": "Product Showcase",
  "description": "Check out our latest product!",
  "image": "https://example.com/image.jpg",
  "actions": [
    {
      "label": "Buy Now",
      "action": "buy_now",
      "type": "primary"
    },
    {
      "label": "Learn More",
      "action": "learn_more",
      "type": "secondary"
    }
  ]
}</code>
                    </div>

                    <p><strong>Response:</strong></p>
                    <div class="api-example">
                        <code>{
  "success": true,
  "messageId": "1234567890",
  "timestamp": "2024-01-01T12:00:00Z"
}</code>
                    </div>
                </div>

                <div class="api-endpoint">
                    <h3>JavaScript Example</h3>
                    <div class="api-example">
                        <code>// Using fetch API
const response = await fetch('/api/rcs/send', {
  method: 'POST',
  headers: {
    'Authorization': 'Bearer YOUR_API_KEY',
    'Content-Type': 'application/json'
  },
  body: JSON.stringify({
    type: 'text',
    text: 'Hello from RCS API!',
    sender: 'business'
  })
});

const result = await response.json();
console.log(result);</code>
                    </div>
                </div>

                <div class="api-endpoint">
                    <h3>cURL Example</h3>
                    <div class="api-example">
                        <code>curl -X POST /api/rcs/send \
  -H "Authorization: Bearer YOUR_API_KEY" \
  -H "Content-Type: application/json" \
  -d '{
    "type": "text",
    "text": "Hello from RCS API!",
    "sender": "business"
  }'</code>
                    </div>
                </div>

                <div class="api-test-section">
                    <h3>Test API Call</h3>
                    <p>Test the API directly from this interface:</p>
                    <textarea id="apiTestJson" placeholder='Enter JSON message here...' rows="8">{
  "type": "text",
  "text": "Test message from API",
  "sender": "business"
}</textarea>
                    <button id="testApiBtn" class="auth-btn">Send API Test</button>
                    <div id="apiTestResult" class="json-status" style="margin-top: 12px;"></div>
                </div>
            </div>
        </div>

        <!-- Settings Section -->
        <div id="settings" class="content-section">
            <div class="api-docs">
                <h2>Settings</h2>
                
                <div class="settings-section">
                    <h3>Account Information</h3>
                    <div class="setting-item">
                        <label>Username:</label>
                        <span id="settingsUsername">user</span>
                    </div>
                    <div class="setting-item">
                        <label>API Key:</label>
                        <div class="api-key-display">
                            <code id="settingsApiKey">Loading...</code>
                            <button id="copySettingsApiKey" class="copy-btn">Copy</button>
                        </div>
                    </div>
                    <div class="setting-item">
                        <label>Login Time:</label>
                        <span id="loginTime">Loading...</span>
                    </div>
                </div>

                <div class="settings-section">
                    <h3>API Usage</h3>
                    <p>Monitor your API usage and limits</p>
                    <div class="usage-stats">
                        <div class="stat-item">
                            <div class="stat-value" id="messagesCount">0</div>
                            <div class="stat-label">Messages Sent</div>
                        </div>
                        <div class="stat-item">
                            <div class="stat-value">‚àû</div>
                            <div class="stat-label">Monthly Limit</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <!-- File Input (Hidden) -->
    <input type="file" id="fileInput" style="display: none;" multiple accept="image/*,video/*,.pdf,.doc,.docx,.txt">

    <script src="auth.js"></script>
    <script src="MessageFormatHandler.js"></script>
    <script src="script.js"></script>
    <script src="dashboard.js"></script>
</body>
</html>
